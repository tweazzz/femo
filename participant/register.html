<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="/dist/style.css" rel="stylesheet" />
    <script defer src="src/scripts/showpass.js"></script>
    <title>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</title>
    <link rel="icon" href="/src/assets/images/cube.png" type="image/png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@25.12.5/build/css/intlTelInput.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  </head>
<style>
/* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–µ–±–æ–ª—å—à–æ–π "–º–æ–¥–∞–ª" –¥–ª—è fullscreen popup */
.iti--container.iti--fullscreen-popup,
.iti--container.iti--force-modal {
  position: fixed !important;
  inset: 0 !important; /* top:0; right:0; bottom:0; left:0; */
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  z-index: 2147483647 !important; /* –Ω–∞–≤–µ—Ä—Ö */
  pointer-events: none !important; /* –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∫–ª–∏–∫–∏, –Ω–æ –≤–Ω—É—Ç—Ä–∏ —è–≤–Ω–æ —Ä–∞–∑—Ä–µ—à–∏–º */
}

/* –∑–∞—Ç–µ–º —Å–∞–º —Å–ø–∏—Å–æ–∫ –≤–Ω—É—Ç—Ä–∏ ‚Äî –º–∞–ª–µ–Ω—å–∫–∏–π, –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–π */
.iti--container.iti--fullscreen-popup .iti__country-list,
.iti--container.iti--force-modal .iti__country-list {
  position: relative !important;
  pointer-events: auto !important;   /* —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –∫–ª–∏–∫–∞—Ç—å –ø–æ —Å–ø–∏—Å–∫—É */
  width: 240px !important;           /* –∂–µ–ª–∞–µ–º–∞—è –º–∞–ª–µ–Ω—å–∫–∞—è —à–∏—Ä–∏–Ω–∞ */
  max-width: calc(100% - 48px) !important;
  max-height: 320px !important;
  overflow-y: auto !important;
  box-shadow: 0 12px 40px rgba(0,0,0,0.28) !important;
  border-radius: 12px !important;
  background: #fff !important;
  transform: none !important;
  top: auto !important;
  left: auto !important;
  right: auto !important;
  bottom: auto !important;
}

/* —Ñ–æ–Ω-–∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) */
.iti--container.iti--fullscreen-popup::before,
.iti--container.iti--force-modal::before {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.22);
  z-index: -1;
}

/* –∫–æ–º–ø–∞–∫—Ç–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞ */
.iti__country { padding: 8px 12px !important; font-size: 13px !important; }

/* –µ—Å–ª–∏ –ø–ª–∞–≥–∏–Ω –ø–æ—á–µ–º—É-—Ç–æ –æ—Å—Ç–∞–≤–ª—è–µ—Ç transform/translate ‚Äî –¥–æ–±–∏–≤–∞–µ–º */
.iti__country-list { transform: none !important; }

</style>
  <body class="bg-gray-background"
  data-role="public"
  data-page="login"
  data-public-page="true">>

  <div class="flex justify-between mx-auto my-8 max-w-lg rounded-3xl p-5" style="margin-bottom:80px;">
    <div>
      <svg width="107" height="24" viewBox="0 0 107 24" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <rect width="107" height="24" fill="url(#pattern0_17_17537)"/>
        <defs>
        <pattern id="pattern0_17_17537" patternContentUnits="objectBoundingBox" width="1" height="1">
        <use xlink:href="#image0_17_17537" transform="matrix(0.00625 0 0 0.0278646 0 -0.0015625)"/>
        </pattern>
        <image id="image0_17_17537" width="160" height="36" preserveAspectRatio="none" xlink:href="data:image/png;base64,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"/>
        </defs>
        </svg>        
    </div>
    <!-- DROPDOWN -->
    <div class="relative inline-block text-left" id="lang-dropdown">
      <!-- –ö–Ω–æ–ø–∫–∞ -->
      <button
        type="button"
        id="lang-dropdown-btn"
        class="flex items-center justify-between w-[85px] h-[23px] px-2 rounded-md"
      >
        <div class="flex items-center gap-2">
          <img id="lang-flag" src="https://flagcdn.com/w24/ru.png" class="w-6 h-[17px] object-contain" />
          <span id="lang-text" class="text-[12px] font-medium">RU</span>
        </div>
    
        <!-- —Å—Ç—Ä–µ–ª–æ—á–∫–∞ -->
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7 10L12.0008 14.58L17 10" stroke="#0A090B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    
      <!-- –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ -->
      <div
        id="lang-menu"
        class="absolute z-20 mt-1 w-[120px] bg-white border border-gray-200 rounded-md shadow-md hidden"
      >
        <!-- RU -->
        <div data-lang="ru"
          class="lang-option flex items-center gap-2 px-2 py-1 cursor-pointer hover:bg-gray-100">
          <img src="https://flagcdn.com/w40/ru.png" class="w-6 h-[17px] object-contain" />
          <span class="text-sm">RU</span>
        </div>
    
        <!-- KZ -->
        <div data-lang="kz"
          class="lang-option flex items-center gap-2 px-2 py-1 cursor-pointer hover:bg-gray-100">
          <img src="https://flagcdn.com/w40/kz.png" class="w-6 h-[17px] object-contain" />
          <span class="text-sm">KZ</span>
        </div>
    
        <!-- EN -->
        <div data-lang="en"
          class="lang-option flex items-center gap-2 px-2 py-1 cursor-pointer hover:bg-gray-100">
          <img src="https://flagcdn.com/w40/gb.png" class="w-6 h-[17px] object-contain" />
          <span class="text-sm">EN</span>
        </div>
      </div>
    </div>
  </div>

    <div class="mx-auto my-8 max-w-lg rounded-3xl bg-white p-5 shadow-md">

      <div class="mb-2 text-center text-2xl font-bold">
        <p data-i18n="participant_register.info">–†–∞—Å—Å–∫–∞–∂–∏ –Ω–µ–º–Ω–æ–≥–æ –æ —Å–µ–±–µ üëã</p>
      </div>

      <form class="space-y-6">
        <br>
        <div>
            <label for="city" class="text-gray-primary mb-1 block text-sm" data-i18n="participant_register.choose_city">–ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞</label>
            <input
              type="text"
              id="city"
              name="city"
              placeholder="–ì–æ—Ä–æ–¥"
              data-i18n="register_participant.city"
              data-i18n-attr="placeholder"
              class="input-base border-default w-full rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-yellow-400"
            />
        </div>
        <div>
          <label class="text-gray-primary mb-1 block text-sm" data-i18n="participant_register.school">–ù–∞–∑–≤–∞–Ω–∏–µ —à–∫–æ–ª—ã</label>
          <input name="school"
            placeholder="–û–±—â–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è —à–∫–æ–ª–∞ ‚Ññ16 –∏–º. –ê. –®–∞—Ä–∏–ø–æ–≤–∞"
            data-i18n="register_participant.school_name"
            data-i18n-attr="placeholder"
            class="input-base border-default"
          />
        </div>
        <div>
            <label for="grade" class="text-gray-primary mb-1 block text-sm" data-i18n="participant_register.class">–ö–ª–∞—Å—Å</label>
            <select
              id="grade"
              name="grade"
              class="input-base border-default w-full rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-yellow-400"
            >
              <option value="" data-i18n="participant_register.choose_class">–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞—Å—Å</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
              <option value="8">8</option>
              <option value="9">9</option>
              <option value="10">10</option>
              <option value="11">11</option>
            </select>
        </div>
        <div>
          <label style="margin-bottom: 7px;" class="text-gray-primary mb-1 block text-sm" data-i18n="participant_register.lang">–Ø–∑—ã–∫ –æ–±—É—á–µ–Ω–∏—è</label>
          <div class="flex flex-wrap items-center gap-4" data-locale="ru">
                                <label class="switch-btn flex items-center gap-2">
                                  <img src="https://flagcdn.com/w40/ru.png" alt="–§–ª–∞–≥ –†–æ—Å—Å–∏–∏" class="h-3 w-5 object-contain">
                                  <input type="radio" name="study_language" value="ru" class="hidden" checked="">
                                  –†—É—Å—Å–∫–∏–π
                                </label>

                                <label class="switch-btn flex items-center gap-2" data-locale="kk">
                                  <img src="https://flagcdn.com/w40/kz.png" alt="–§–ª–∞–≥ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞" class="h-3 w-5 object-contain">
                                  <input type="radio" name="study_language" value="kk" class="hidden">
                                  “ö–∞–∑–∞“õ—à–∞
                                </label>

                                <label class="switch-btn flex items-center gap-2" data-locale="en">
                                  <img src="https://flagcdn.com/w40/gb.png" alt="–§–ª–∞–≥ –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏–∏" class="h-3 w-5 object-contain">
                                  <input type="radio" name="study_language" value="en" class="hidden">
                                  English
                                </label>

                                <!-- Spanish -->
                                <label class="switch-btn flex items-center gap-2" data-locale="es">
                                  <img src="https://flagcdn.com/w40/es.png" alt="–§–ª–∞–≥ –ò—Å–ø–∞–Ω–∏–∏" class="h-3 w-5 object-contain">
                                  <input type="radio" name="study_language" value="es" class="hidden">
                                  Espa√±ol
                                </label>

                                <!-- German -->
                                <label class="switch-btn flex items-center gap-2" data-locale="de">
                                  <img src="https://flagcdn.com/w40/de.png" alt="–§–ª–∞–≥ –ì–µ—Ä–º–∞–Ω–∏–∏" class="h-3 w-5 object-contain">
                                  <input type="radio" name="study_language" value="de" class="hidden">
                                  Deutsch
                                </label>

                                <!-- Azerbaijani -->
                                <label class="switch-btn lang-option flex items-center gap-2" data-locale="az">
                                  <img src="https://flagcdn.com/w40/az.png" alt="–§–ª–∞–≥ –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω–∞" class="h-3 w-5 object-contain">
                                  <input type="radio" name="study_language" value="az" class="hidden">
                                  <span class="lang-label">Az…ôrbaycanca</span>
                                </label>

                                <!-- Georgian -->
                                <label class="switch-btn lang-option flex items-center gap-2" data-locale="ka">
                                  <img src="https://flagcdn.com/w40/ge.png" alt="–§–ª–∞–≥ –ì—Ä—É–∑–∏–∏" class="h-3 w-5 object-contain">
                                  <input type="radio" name="study_language" value="ka" class="hidden">
                                  <span class="lang-label">·É•·Éê·É†·Éó·É£·Éö·Éò</span>
                                </label>
          </div>
        </div>                    
        <div>
          <label class="text-gray-primary mb-1 block text-sm" data-i18n="participant_register.fio_parent">–§–ò–û —Ä–æ–¥–∏—Ç–µ–ª—è</label>
          <input
            type="text" name="full_name"
            placeholder="Aizhan Akhmetova"
            class="input-base border-default"
          />
        </div>
      <div>
          <label class="text-gray-primary mb-1 block text-sm" data-i18n="participant_register.parent_phone">–¢–µ–ª–µ—Ñ–æ–Ω —Ä–æ–¥–∏—Ç–µ–ª—è</label>
          <input id="parent_phone" type="tel" name="parent_phone" class="input-base border-default w-full">
      </div>

        
        <!-- –§–ò–û —É—á–∏—Ç–µ–ª—è -->
        <div>
            <label class="text-gray-primary mb-1 block text-sm" data-i18n="participant_register.fio_teacher">–§–ò–û —É—á–∏—Ç–µ–ª—è</label>
            <input
            type="text"
            name="teacher_full_name"
            placeholder="–ì—É–ª—å–º–∏—Ä–∞ –ê–±–¥—Ä–∞—Ö–º–∞–Ω–æ–≤–∞"
            class="input-base border-default"
            />
        </div>
        
        <!-- –¢–µ–ª–µ—Ñ–æ–Ω –∏ Email —É—á–∏—Ç–µ–ª—è –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É -->
        <div class="flex flex-col md:flex-row gap-4">
        <div class="flex-1">
            <label class="text-gray-primary mb-1 block text-sm" data-i18n="participant_register.teacher_phone">–¢–µ–ª–µ—Ñ–æ–Ω —É—á–∏—Ç–µ–ª—è</label>
            <input id="teacher_phone" type="tel" name="teacher_phone" class="input-base border-default w-full">
        </div>

        
            <div class="flex-1">
            <label class="text-gray-primary mb-1 block text-sm" data-i18n="participant_register.teacher_email">Email —É—á–∏—Ç–µ–ª—è</label>
            <input
                type="email"
                name="teacher_email"
                placeholder="teacher@example.com"
                class="input-base border-default w-full"
            />
            </div>
        </div>
  

        <button
          type="submit"
          class="bg-orange-primary w-full cursor-pointer rounded-xl py-2 text-white transition"
          data-i18n="participant_register.start_learn"
        >
            –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
        </button>

      </form>

    </div>
    <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@25.12.5/build/js/intlTelInput.min.js"></script>
    <script>
      const input = document.querySelector("#phone");
      window.intlTelInput(input, {
        loadUtils: () => import("https://cdn.jsdelivr.net/npm/intl-tel-input@25.12.5/build/js/utils.js"),
      });
    </script>

  </body>
</html>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const phoneInputs = [
    document.querySelector("#parent_phone"),
    document.querySelector("#teacher_phone")
  ].filter(Boolean);

  if (!phoneInputs.length) return;

  // –∫–∞—Ä—Ç–∞ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –¥–ª–∏–Ω –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —á–∞—Å—Ç–∏ (–ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ —Ä–∞—Å—à–∏—Ä–∏–º)
  const nationalLengths = {
    kz: 10, // Kazakhstan (+7) ‚Äî 10 —Ü–∏—Ñ—Ä –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —á–∞—Å—Ç–∏
    ru: 10, // Russia (+7)
    kg: 9,  // Kyrgyzstan (+996)
    uz: 9,  // Uzbekistan (+998) ‚Äî –æ–±—ã—á–Ω–æ 9
    tr: 10  // Turkey (+90)
  };

  phoneInputs.forEach(input => {
    // —É–±–∏—Ä–∞–µ–º placeholder, —á—Ç–æ–±—ã –ø–ª–∞–≥–∏–Ω —Å–∞–º —É—Å—Ç–∞–Ω–æ–≤–∏–ª country-specific placeholder
    input.removeAttribute('placeholder');
    input.setAttribute('inputmode', 'tel');
    input.setAttribute('autocomplete', 'tel');

    const iti = window.intlTelInput(input, {
      initialCountry: "auto",
      separateDialCode: true,           // –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∫–æ–¥ —Å–ª–µ–≤–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
      preferredCountries: ["kz","ru","kg","uz","tr"],
      geoIpLookup: (success) => {
        fetch("https://ipapi.co/json/")
          .then(res => res.json())
          .then(data => success((data && data.country_code) ? data.country_code.toLowerCase() : 'kz'))
          .catch(() => success('kz'));
      },

      /* –ø–æ–¥–≥—Ä—É–∂–∞–µ–º utils –∫–∞–∫ –º–æ–¥—É–ª—å ‚Äî –Ω—É–∂–Ω–æ –¥–ª—è placeholder/formatting/validation */
      loadUtils: () => import("https://cdn.jsdelivr.net/npm/intl-tel-input@25.12.5/build/js/utils.js"),

      dropdownContainer: document.body,  // —Ä–µ–Ω–¥–µ—Ä–∏–º –≤ body ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞—Ç—å layout
      autoPlaceholder: "aggressive",     // –ø–ª–∞–≥–∏–Ω –≤—ã—Å—Ç–∞–≤–∏—Ç –ø—Ä–∏–º–µ—Ä –Ω–æ–º–µ—Ä–∞ –∫–∞–∫ placeholder
      placeholderNumberType: "MOBILE",
      formatOnDisplay: true,
      formatAsYouType: true,             // —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –Ω–∞–±–æ—Ä–µ (—Ç—Ä–µ–±—É–µ—Ç utils)
      strictMode: true,                  // –∑–∞–ø—Ä–µ—â–∞–µ—Ç –ª–∏—à–Ω–∏–µ —Å–∏–º–≤–æ–ª—ã –∏ –æ–±—Ä–µ–∑–∞–µ—Ç –¥–æ max
      nationalMode: true,                // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (placeholder –±—É–¥–µ—Ç –∫–∞–∫ (777) ...)
      validationNumberTypes: ["MOBILE"], // –≤–∞–ª–∏–¥–∏—Ä—É–µ–º –∫–∞–∫ –º–æ–±–∏–ª—å–Ω—ã–µ (–ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é)
      allowDropdown: true
    });

    // –∫–æ–≥–¥–∞ utils –∑–∞–≥—Ä—É–∂–µ–Ω ‚Äî –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
    if (iti && iti.promise) {
      iti.promise.then(() => {
        // –æ–±–Ω–æ–≤–ª—è–µ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã –≤ dataset (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ fallback)
        const country = iti.getSelectedCountryData();
        const iso2 = (country && country.iso2) ? country.iso2.toLowerCase() : '';
        const maxDigits = nationalLengths[iso2] || 15;
        input.dataset.maxDigits = String(maxDigits);
      }).catch(()=>{ /* ignore */ });
    }

    // –ø—Ä–∏ —Å–º–µ–Ω–µ —Å—Ç—Ä–∞–Ω—ã ‚Äî –æ–±–Ω–æ–≤–ª—è–µ–º –æ–∂–∏–¥–∞–µ–º—É—é –¥–ª–∏–Ω—É (–∏ placeholder –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
    input.addEventListener('countrychange', () => {
      const country = iti.getSelectedCountryData();
      const iso2 = (country && country.iso2) ? country.iso2.toLowerCase() : '';
      input.dataset.maxDigits = String(nationalLengths[iso2] || 15);

      // –µ—Å–ª–∏ utils –∑–∞–≥—Ä—É–∂–µ–Ω, –ø–æ–¥–ø—Ä–∞–≤–∏–º —Ñ–æ—Ä–º–∞—Ç (setNumber –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç —Ñ–æ—Ä–º–∞—Ç)
      try {
        const current = input.value.replace(/\D/g, '');
        if (current) {
          // —É—Å—Ç–∞–Ω–æ–≤–∏–º –∑–∞–Ω–æ–≤–æ, —á—Ç–æ–±—ã –ø–ª–∞–≥–∏–Ω –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–ª –ø–æ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–µ
          iti.setNumber(current);
        }
      } catch (e) {}
    });

    // input: –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã (–ø–ª–∞–≥–∏–Ω —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ) –∏ –Ω–µ –¥–∞—ë–º —Å–≤–µ—Ä—Ö–¥–ª–∏–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
    input.addEventListener('input', (e) => {
      // –µ—Å–ª–∏ strictMode + utils –ø–æ–¥–∫–ª—é—á—ë–Ω ‚Äî –ø–ª–∞–≥–∏–Ω —É–∂–µ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç, –Ω–æ –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π
      const maxDigits = Number(input.dataset.maxDigits || 15);
      const digits = (input.value || '').replace(/\D/g, '').slice(0, maxDigits);
      // –≤ —Ä–µ–∂–∏–º–µ separateDialCode –∑–Ω–∞—á–µ–Ω–∏–µ –∏–Ω–ø—É—Ç–∞ ‚Äî –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å; —É—Å—Ç–∞–Ω–æ–≤–∏–º –µ—ë –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π
      try {
        // —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —á–µ—Ä–µ–∑ –ø–ª–∞–≥–∏–Ω, —á—Ç–æ–±—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–∏–ª–æ—Å—å
        iti.setNumber(digits);
      } catch (err) {
        // fallback: –ø—Ä–æ—Å—Ç–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Ü–∏—Ñ—Ä—ã
        input.value = digits;
      }
      input.classList.remove('input-invalid');
    });

    // blur: –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
    input.addEventListener('blur', () => {
      let valid = false;
      try {
        valid = iti.isValidNumber();
      } catch (err) {
        // fallback: –ø—Ä–æ—Å—Ç–∞—è –¥–ª–∏–Ω–∞
        const digits = (input.value || '').replace(/\D/g, '');
        const maxDigits = Number(input.dataset.maxDigits || 15);
        valid = digits.length === maxDigits || digits.length >= Math.max(6, Math.floor(maxDigits * 0.8));
      }
      if (!valid && input.value.trim() !== '') {
        input.classList.add('input-invalid');
      } else {
        input.classList.remove('input-invalid');
      }
    });

    // –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –∫–ª–∏–∫–∞–µ—Ç –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç—É ‚Äî dropdown position –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω –ø–ª–∞–≥–∏–Ω–æ–º;
    // –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö ‚Äî –ø–ª–∞–≥–∏–Ω —Å–∞–º –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç fullscreen popup; –ø–æ—ç—Ç–æ–º—É –Ω–µ —Ç—Ä–æ–≥–∞–µ–º —ç—Ç–æ.
  });
});
</script>



<script>
document.addEventListener('DOMContentLoaded', () => {
  const form = document.querySelector('form');
  if (!form) return;

  // --- –±–∞–Ω–Ω–µ—Ä—ã —É—Å–ø–µ—Ö/–æ—à–∏–±–∫–∞ ---
  const successBanner = document.createElement('div');
  successBanner.setAttribute('aria-live', 'polite');
  successBanner.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 z-50 px-4 py-2 rounded-md bg-green-100 text-green-800 shadow-md flex items-center gap-3 text-sm font-semibold -translate-y-6 opacity-0 pointer-events-none transition-all duration-300';
  successBanner.innerHTML = `
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.707a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
    </svg>
    <span class="success-text"></span>
  `;
  document.body.insertBefore(successBanner, document.body.firstChild);

  const errorBanner = document.createElement('div');
  errorBanner.setAttribute('aria-live', 'polite');
  errorBanner.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 z-50 px-4 py-2 rounded-md bg-red-100 text-red-800 shadow-md flex items-center gap-3 text-sm font-semibold -translate-y-6 opacity-0 pointer-events-none transition-all duration-300';
  errorBanner.innerHTML = `
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
      <path d="M8.257 3.099c.765-1.36 2.72-1.36 3.485 0l5.454 9.69A1.75 1.75 0 0116.996 15H3.004a1.75 1.75 0 01-1.2-2.211l5.453-9.69zM11 13a1 1 0 10-2 0 1 1 0 002 0zm-1-3V6h0v4z"/>
    </svg>
    <span class="error-text"></span>
  `;
  document.body.insertBefore(errorBanner, successBanner.nextSibling);

  function showSuccess(text = '', ms = 1700) {
    successBanner.querySelector('.success-text').textContent = text;
    successBanner.classList.remove('-translate-y-6','opacity-0','pointer-events-none');
    successBanner.classList.add('translate-y-0','opacity-100','pointer-events-auto');
    clearTimeout(successBanner._hideTimeout);
    successBanner._hideTimeout = setTimeout(() => {
      successBanner.classList.remove('translate-y-0','opacity-100','pointer-events-auto');
      successBanner.classList.add('-translate-y-6','opacity-0','pointer-events-none');
    }, ms);
  }

  function showError(text = '', ms = 4000) {
    errorBanner.querySelector('.error-text').textContent = text;
    errorBanner.classList.remove('-translate-y-6','opacity-0','pointer-events-none');
    errorBanner.classList.add('translate-y-0','opacity-100','pointer-events-auto');
    clearTimeout(errorBanner._hideTimeout);
    errorBanner._hideTimeout = setTimeout(() => {
      errorBanner.classList.remove('translate-y-0','opacity-100','pointer-events-auto');
      errorBanner.classList.add('-translate-y-6','opacity-0','pointer-events-none');
    }, ms);
  }

  // –ü—Ä–æ—Å—Ç–∞—è —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è RU -> EN (fallback –¥–ª—è name_en)
  function translitRuToEn(str) {
    if (!str) return '';
    const map = {
      '–ê':'A','–ë':'B','–í':'V','–ì':'G','–î':'D','–ï':'E','–Å':'E','–ñ':'Zh','–ó':'Z','–ò':'I','–ô':'Y','–ö':'K','–õ':'L','–ú':'M','–ù':'N','–û':'O','–ü':'P','–†':'R','–°':'S','–¢':'T','–£':'U','–§':'F','–•':'Kh','–¶':'Ts','–ß':'Ch','–®':'Sh','–©':'Shch','–™':'','–´':'Y','–¨':'','–≠':'E','–Æ':'Yu','–Ø':'Ya',
      '–∞':'a','–±':'b','–≤':'v','–≥':'g','–¥':'d','–µ':'e','—ë':'e','–∂':'zh','–∑':'z','–∏':'i','–π':'y','–∫':'k','–ª':'l','–º':'m','–Ω':'n','–æ':'o','–ø':'p','—Ä':'r','—Å':'s','—Ç':'t','—É':'u','—Ñ':'f','—Ö':'kh','—Ü':'ts','—á':'ch','—à':'sh','—â':'shch','—ä':'','—ã':'y','—å':'','—ç':'e','—é':'yu','—è':'ya'
    };
    return String(str).split('').map(c => map[c] !== undefined ? map[c] : c).join('');
  }

  const gradeMap = {
    '1': 'first','2': 'second','3': 'third','4': 'fourth','5': 'fifth',
    '6': 'sixth','7': 'seventh','8': 'eighth','9': 'ninth','10': 'tenth','11': 'eleventh'
  };

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const submitBtn = form.querySelector('button[type="submit"]');
    let origText = '';
    if (submitBtn) {
      origText = submitBtn.innerText;
      submitBtn.disabled = true;
      submitBtn.innerText = '–û—Ç–ø—Ä–∞–≤–ª—è–µ–º...';
    }

    try {
      // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Ñ–æ—Ä–º—ã (–ø–æ –∏–º–µ–Ω–∏ –ø–æ–ª–µ–π –∏–∑ —Ç–≤–æ–µ–≥–æ HTML)
      const city = (form.elements['city']?.value || '').trim();
      const school = (form.elements['school']?.value || '').trim();
      const gradeValue = (form.elements['grade']?.value || '').trim();
      const langChecked = form.querySelector('input[name="study_language"]:checked');
      const studyLanguage = (langChecked?.value || 'ru').trim();

      const parent_name_ru = (form.elements['full_name']?.value || '').trim(); // —Ä–æ–¥–∏—Ç–µ–ª—å
      // –ø–æ–ª—É—á–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä intl-tel-input –∏ –≤—ã—Ç–∞—Å–∫–∏–≤–∞–µ–º E.164 (—Å –∫–æ–¥–æ–º), —É–±–∏—Ä–∞–µ–º –≤—Å–µ –Ω–µ—Ü–∏—Ñ—Ä–æ–≤—ã–µ —Å–∏–º–≤–æ–ª—ã –∫—Ä–æ–º–µ –≤–µ–¥—É—â–µ–≥–æ '+'
      let parent_phone = '';
      try {
        const parentInst = window.intlTelInput && window.intlTelInput.getInstance
          ? window.intlTelInput.getInstance(document.querySelector('#parent_phone'))
          : null;
        parent_phone = parentInst ? (parentInst.getNumber() || '') : (form.elements['parent_phone']?.value || '');
        // –æ—á–∏—Å—Ç–∫–∞: –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã –∏ –≤–µ–¥—É—â–∏–π '+'
        parent_phone = parent_phone.replace(/[^\d+]/g, '');
      } catch (e) {
        // fallback ‚Äî –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –ø—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–≤–ª—è–µ–º —Ü–∏—Ñ—Ä—ã (–±–µ–∑ +)
        parent_phone = (form.elements['parent_phone']?.value || '').replace(/\D/g, '');
      }

      const teacher_name_ru = (form.elements['teacher_full_name']?.value || '').trim();
      // –¥–ª—è —É—á–∏—Ç–µ–ª—è —Ç–æ –∂–µ —Å–∞–º–æ–µ
      let teacher_phone = '';
      try {
        const teacherInst = window.intlTelInput && window.intlTelInput.getInstance
          ? window.intlTelInput.getInstance(document.querySelector('#teacher_phone'))
          : null;
        teacher_phone = teacherInst ? (teacherInst.getNumber() || '') : (form.elements['teacher_phone']?.value || '');
        teacher_phone = teacher_phone.replace(/[^\d+]/g, '');
      } catch (e) {
        teacher_phone = (form.elements['teacher_phone']?.value || '').replace(/\D/g, '');
      }
      // teacher_email –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Ñ–æ—Ä–º–µ, –Ω–æ API –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –µ–≥–æ –≤ payload; —Å–æ—Ö—Ä–∞–Ω—è–µ–º –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
      const teacher_email = (form.elements['teacher_email']?.value || '').trim();

      // –î–æ—Å—Ç–∞—ë–º pending –¥–∞–Ω–Ω—ã–µ –∏–∑ sessionStorage (–ø–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –±—ã–ª–∞ –∏—Ö –ø–æ–ª–æ–∂–∏—Ç—å)
      let pending = {};
      try {
        const raw = sessionStorage.getItem('pending_registration') || localStorage.getItem('pending_participant');
        pending = raw ? JSON.parse(raw) : {};
      } catch (err) {
        console.warn('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è pending_registration:', err);
        pending = {};
      }

      const email = (pending.email || '').trim();
      const password = (sessionStorage.getItem('pending_password') || '').trim();
      const full_name_ru = (pending.full_name_ru || '').trim();
      const country = (pending.country || '').trim();

      // –í–∞–ª–∏–¥–∞—Ü–∏—è
      if (!email) { showError('–ù–µ –Ω–∞–π–¥–µ–Ω email –∏–∑ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (pending_registration).'); throw new Error('validation'); }
      if (!password) { showError('–ù–µ –Ω–∞–π–¥–µ–Ω –ø–∞—Ä–æ–ª—å (sessionStorage.pending_password).'); throw new Error('validation'); }
      if (!full_name_ru) { showError('–ù–µ –Ω–∞–π–¥–µ–Ω–æ –§–ò–û –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (pending_registration.full_name_ru).'); throw new Error('validation'); }
      if (!country) { showError('–ù–µ –∑–∞–¥–∞–Ω–∞ —Å—Ç—Ä–∞–Ω–∞ (pending_registration.country).'); throw new Error('validation'); }

      if (!city) { showError('–£–∫–∞–∂–∏—Ç–µ –≥–æ—Ä–æ–¥.'); throw new Error('validation'); }
      if (!school) { showError('–£–∫–∞–∂–∏—Ç–µ —à–∫–æ–ª—É.'); throw new Error('validation'); }
      if (!gradeValue) { showError('–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞—Å—Å.'); throw new Error('validation'); }
      if (!parent_name_ru) { showError('–£–∫–∞–∂–∏—Ç–µ –§–ò–û —Ä–æ–¥–∏—Ç–µ–ª—è.'); throw new Error('validation'); }
      if (!parent_phone) { showError('–£–∫–∞–∂–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω —Ä–æ–¥–∏—Ç–µ–ª—è.'); throw new Error('validation'); }
      if (!teacher_name_ru) { showError('–£–∫–∞–∂–∏—Ç–µ –§–ò–û —É—á–∏—Ç–µ–ª—è.'); throw new Error('validation'); }
      if (!teacher_phone) { showError('–£–∫–∞–∂–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω —É—á–∏—Ç–µ–ª—è.'); throw new Error('validation'); }

      const grade = gradeMap[gradeValue] || gradeValue;

      // payload –≤ —Ñ–æ—Ä–º–∞—Ç–µ API
      const payload = {
        email,
        password,
        full_name_ru,
        full_name_en: translitRuToEn(full_name_ru),
        study_language: studyLanguage,
        country,
        city,
        school,
        grade,
        parent: {
          name_ru: parent_name_ru,
          name_en: translitRuToEn(parent_name_ru),
          phone_number: parent_phone
        },
        teacher: {
          name_ru: teacher_name_ru,
          name_en: translitRuToEn(teacher_name_ru),
          phone_number: teacher_phone
        }
      };

      // –û—Ç–ø—Ä–∞–≤–∫–∞ POST (–±–µ–∑ Authorization)
      const url = 'https://portal.femo.kz/api/users/participant/registration/';
      const resp = await fetch(url, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });

      let respJson = null;
      try { respJson = await resp.clone().json(); } catch (e) { respJson = null; }

      if (resp.ok) {
        // —á–∏—Å—Ç–∏–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        try {
          sessionStorage.removeItem('pending_registration');
          sessionStorage.removeItem('pending_password');
          localStorage.removeItem('pending_participant');
          localStorage.setItem('is_viewed', 'false'); 
        } catch (e) {}

        showSuccess('–ü—Ä–æ—Ñ–∏–ª—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º...', 1500);
        setTimeout(() => { window.location.href = '/participant/reg_success.html'; }, 1200);
        return;
      } else {
        // —Ñ–æ—Ä–º–∏—Ä—É–µ–º —á–∏—Ç–∞–±–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
        let errText = `–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: ${resp.status}`;
        if (respJson) {
          if (respJson.detail) errText = String(respJson.detail);
          else if (respJson.code) errText = String(respJson.code);
          else {
            // –ø–µ—Ä–µ—á–∏—Å–ª–∏–º –ø–æ–ª—è –æ—à–∏–±–∫–∏
            const parts = [];
            for (const k in respJson) {
              const v = respJson[k];
              if (Array.isArray(v)) parts.push(`${k}: ${v.join(', ')}`);
              else if (typeof v === 'object') parts.push(`${k}: ${JSON.stringify(v)}`);
              else parts.push(`${k}: ${String(v)}`);
            }
            if (parts.length) errText = parts.join('\n');
            else errText = String(respJson);
          }
        }
        showError(errText);
        console.error('participant registration failed', resp.status, respJson);
      }

    } catch (err) {
      if (err && err.message === 'validation') {
        // vlaidation ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ —É–∂–µ –ø–æ–∫–∞–∑–∞–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
      } else {
        console.error('submit handler error', err);
        showError('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.');
      }
    } finally {
      if (submitBtn) {
        submitBtn.disabled = false;
        submitBtn.innerText = origText || '–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é';
      }
    }
  });
});
</script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const dropdownBtn = document.getElementById("lang-dropdown-btn");
    const menu = document.getElementById("lang-menu");
  
    const flagEl = document.getElementById("lang-flag");
    const textEl = document.getElementById("lang-text");
  
    const langMap = {
      ru: { flag: "https://flagcdn.com/w40/ru.png", label: "RU" },
      kz: { flag: "https://flagcdn.com/w40/kz.png", label: "KZ" },
      en: { flag: "https://flagcdn.com/w40/gb.png", label: "EN" }
    };
  
    // –æ—Ç–∫—Ä—ã—Ç—å / –∑–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é
    dropdownBtn.addEventListener("click", () => {
      menu.classList.toggle("hidden");
    });
  
    // –ø–æ–¥—Å–≤–µ—Ç–∫–∞ —è–∑—ã–∫–∞
    function highlightSelected(lang) {
      document.querySelectorAll(".lang-option").forEach(opt => {
        opt.classList.toggle("active", opt.dataset.lang === lang);
      });
    }
  
    // –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —è–∑—ã–∫–∞
    const current = localStorage.getItem("lang") || "ru";
    flagEl.src = langMap[current].flag;
    textEl.textContent = langMap[current].label;
    highlightSelected(current);
  
    // –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞
    document.querySelectorAll("#lang-menu .lang-option").forEach(opt => {
      opt.addEventListener("click", async () => {
        const lang = opt.dataset.lang;
  
        // UI
        flagEl.src = langMap[lang].flag;
        textEl.textContent = langMap[lang].label;
        highlightSelected(lang);
        menu.classList.add("hidden");
  
        // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ
        localStorage.setItem("lang", lang);
  
        // –º–µ–Ω—è–µ–º —è–∑—ã–∫ –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞
        await changeLanguageAndReload(lang, { reload: true, waitForApp: false });
        location.reload();
      });
    });
  
    // –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ
    document.addEventListener("click", (e) => {
      if (!document.getElementById("lang-dropdown").contains(e.target)) {
        menu.classList.add("hidden");
      }
    });
  });
</script>
<script>
  // 1) —Å–æ—Ö—Ä–∞–Ω—è–µ–º —è–∑—ã–∫ —Ñ—Ä–æ–Ω—Ç–∞
const lang = localStorage.getItem("lang") || "ru";

// 2) –ø–µ—Ä–µ–≤–æ–¥–∏–º –≤ backend —Ñ–æ—Ä–º–∞—Ç
function frontendToBackend(frontend) {
  if (frontend === "kz" || frontend === "kk") return "kk";
  if (frontend === "en") return "en";
  return "ru";
}

const backendLang = frontendToBackend(lang);

// 3) —à–ª—ë–º —è–∑—ã–∫ –Ω–∞ backend
fetch("https://portal.femo.kz/api/users/settings/", {
  method: "PATCH",
  headers: {
    "Content-Type": "application/json",
    Authorization: `Bearer ${data.access}`,
  },
  body: JSON.stringify({
    language: backendLang,
  }),
})
.then(() => {
  console.log("Language saved:", backendLang);
})
.catch(e => console.warn("Error saving language:", e));

</script>
<script src="/src/scripts/i18n.js" defer></script>
<script src="/src/scripts/langInit.js" defer></script>






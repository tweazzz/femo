<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–†–µ–π—Ç–∏–Ω–≥</title>
    <link rel="stylesheet" href="/dist/style.css" />
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/@lucide/web@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="icon" href="/src/assets/images/cube.png" type="image/png">
  </head>

  <body>
    <div class="flex h-screen">
      <!-- Sidebar -->
      <aside id="sidebar" class="sidebar">
        <div class="mb-10 px-6 py-7">
          <img src="/src/assets/images/logo.png" alt="Logo" class="h-5" />
        </div>

        <nav class="flex-1 px-4">
          <a href="/participant/dashboard.html" class="sidebar-link" data-i18n="dashboard.nav_index">
            <img src="/src/assets/images/index_noactive.svg" alt="–ì–ª–∞–≤–Ω–∞—è" class="mr-3 size-6" />
            –ì–ª–∞–≤–Ω–∞—è
          </a>
          <a href="/participant/olympiads.html" class="sidebar-link" data-i18n="dashboard.nav_olympiads">
            <img src="/src/assets/images/olympiad_noactive.svg" alt="–û–ª–∏–º–ø–∏–∞–¥—ã" class="mr-3 size-6" />
            –û–ª–∏–º–ø–∏–∞–¥—ã
          </a>
          <a href="/participant/tasks.html" class="sidebar-link" data-i18n="dashboard.nav_tasks">
            <img src="/src/assets/images/task_noactive.svg" alt="–ó–∞–¥–∞—á–∏" class="mr-3 size-6" />
            –ó–∞–¥–∞—á–∏
          </a>
          <a href="/participant/certificates.html" class="sidebar-link" data-i18n="dashboard.nav_certificates">
            <img src="/src/assets/images/certificate_noactive.svg" alt="–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã" class="mr-3 size-6" />
            –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
          </a>
          <a href="/participant/rate-overall.html" class="sidebar-link active" data-i18n="dashboard.nav_ratings">
            <img src="/src/assets/images/ranking_active.svg" alt="–†–µ–π—Ç–∏–Ω–≥" class="mr-3 size-6" />
            –†–µ–π—Ç–∏–Ω–≥
          </a>
          <a href="/participant/payments.html" class="sidebar-link">
            <img src="/src/assets/images/balance_noactive.svg" alt="–ë–∞–ª–∞–Ω—Å –∏ –ø–ª–∞—Ç–µ–∂–∏" class="mr-3 size-6" />
            <span data-i18n="dashboard.nav_payments">–ë–∞–ª–∞–Ω—Å –∏ –ø–ª–∞—Ç–µ–∂–∏</span>
          </a>
        </nav>

        <div class="p-4">
          <a href="/participant/my-way.html" class="sidebar-link">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="mr-3 size-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"
              />
            </svg>

            <span data-i18n="dashboard.profile">–ü—Ä–æ—Ñ–∏–ª—å</span>
          </a>
          <a href="/" class="sidebar-link flex items-center gap-2">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M7.41699 6.29995C7.67533 3.29995 9.21699 2.07495 12.592 2.07495H12.7003C16.4253 2.07495 17.917 3.56662 17.917 7.29162V12.725C17.917 16.45 16.4253 17.9416 12.7003 17.9416H12.592C9.24199 17.9416 7.70033 16.7333 7.42533 13.7833" stroke="#222222" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M12.5002 10H3.01685" stroke="#222222" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M4.87467 7.20825L2.08301 9.99992L4.87467 12.7916" stroke="#222222" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
              <span data-i18n="dashboard.logout">–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</span>
            </a>
        </div>
      </aside>

      <!-- Overlay -->
      <div
        id="overlay"
        class="fixed inset-0 z-10 hidden cursor-pointer bg-black/50 transition lg:hidden"
        onclick="toggleSidebar()"
      ></div>

      <!-- Main Content -->
      <div class="flex flex-1 flex-col overflow-hidden">
        <!-- Top Bar -->
        <header class="border-gray-border border-b bg-white">
          <div class="flex items-center justify-between px-6 py-4">
            <div class="flex items-center">
              <button
                class="mr-4 cursor-pointer text-gray-600 hover:text-gray-900 lg:hidden"
                onclick="toggleSidebar()"
              >
                <i data-lucide="menu" class="h-6 w-6"></i>
              </button>
              <h1 class="text-xl max-md:hidden"></h1>
            </div>

            <div class="flex items-center gap-6">
              <!-- MY BALANCE -->
              <div class="balance-card">
                <span class="balance-label">–ë–∞–ª–∞–Ω—Å:</span>
                <span class="balance">0 ‚Ç∏</span>
              </div>
              

              <!-- DROPDOWN -->
              <div class="relative inline-block text-left" id="lang-dropdown">
                <!-- –ö–Ω–æ–ø–∫–∞ -->
                <button
                  type="button"
                  id="lang-dropdown-btn"
                  class="flex items-center justify-between w-[85px] h-[23px] px-2 rounded-md border-gray-300 bg-white"
                >
                  <div class="flex items-center gap-2">
                    <img id="lang-flag" src="https://flagcdn.com/w24/ru.png" class="w-6 h-[17px] object-contain" />
                    <span id="lang-text" class="text-[12px] font-medium">RU</span>
                  </div>
              
                  <!-- —Å—Ç—Ä–µ–ª–æ—á–∫–∞ -->
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7 10L12.0008 14.58L17 10" stroke="#0A090B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
              
                <!-- –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ -->
                <div
                  id="lang-menu"
                  class="absolute z-20 mt-1 w-[120px] bg-white border border-gray-200 rounded-md shadow-md hidden"
                >
                  <!-- RU -->
                  <div data-lang="ru"
                    class="lang-option flex items-center gap-2 px-2 py-1 cursor-pointer hover:bg-gray-100">
                    <img src="https://flagcdn.com/w40/ru.png" class="w-6 h-[17px] object-contain" />
                    <span class="text-sm">RU</span>
                  </div>
              
                  <!-- KZ -->
                  <div data-lang="kz"
                    class="lang-option flex items-center gap-2 px-2 py-1 cursor-pointer hover:bg-gray-100">
                    <img src="https://flagcdn.com/w40/kz.png" class="w-6 h-[17px] object-contain" />
                    <span class="text-sm">KZ</span>
                  </div>
              
                  <!-- EN -->
                  <div data-lang="en"
                    class="lang-option flex items-center gap-2 px-2 py-1 cursor-pointer hover:bg-gray-100">
                    <img src="https://flagcdn.com/w40/gb.png" class="w-6 h-[17px] object-contain" />
                    <span class="text-sm">EN</span>
                  </div>
                </div>
              </div>
              
              
              <div class="flex items-center space-x-4">
                <button
                  type="button"
                  onclick="toggleModal('modalNotification')"
                  class="text-orange-primary bg-orange-secondary cursor-pointer rounded-full p-1"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="size-6"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"
                    />
                  </svg>
                </button>
                <div class="flex items-center space-x-3">
                  <img
                    id="user-avatar"
                    src=""
                    alt="Profile"
                    class="h-10 w-10 rounded-full"
                  />
                  <div>
                    <p id="user-name" class="font-bold"></p>
                    <p id="user-role" class="text-primary text-sm"></p>
                  </div>
                </div>
              </div>
          </div>
          </div>
        </header>

        <!-- Dashboard Content -->
        <main class="flex-1 overflow-y-auto p-6">
          <!-- Header -->
          <div class="mb-6 flex items-center justify-between">
            <h1 class="text-2xl font-semibold" data-i18n="rate.my_rate_header">–ú–æ–π —Ä–µ–π—Ç–∏–Ω–≥</h1>
          </div>

          <div class="grid-cards mb-6">
            <div
              class="grid-item-a bg-violet-secondary border-default flex flex-col items-center justify-center rounded-xl px-3 text-center"
            >
              <p id="assignment_points" class="text-violet-primary text-5xl font-bold"></p>
              <p class="text-lg font-bold" data-i18n="rate.point_for_task">–ë–∞–ª–ª—ã –∑–∞ –∑–∞–¥–∞—á–∏</p>
              <p>
                <span data-i18n="rate.point_for_task_txt1">–¢—ã –∑–∞–∫—Ä—ã–ª </span><span id="assignments_percent" class="text-violet-primary">0</span><span data-i18n="rate.point_for_task_txt2"><span class="text-violet-primary">%</span> –∑–∞–¥–∞—á ‚Äî
                  –∫—Ä—É—Ç–æ!</span>
              </p>
            </div>

            <div
              class="grid-item-b bg-orange-secondary border-default flex items-center justify-center rounded-xl px-3 text-center"
            >
              <img
                src="/src/assets/images/stars_big.png"
                class="h-36 w-44"
                alt="stars"
              />
              <div class="space-y-1">
                <p id="total_points" class="text-orange-primary text-6xl font-bold"></p>
                <p class="flex items-center gap-1 text-lg font-bold">
                  <span data-i18n="rate.point_for_power">–û—á–∫–∏ —Å–∏–ª—ã</span>
                  <img
                    src="/src/assets/images/coin.png"
                    class="h-6"
                    alt="coin"
                  />
                </p>
                <p class="text-sm">
                  <span data-i18n="rate.point_for_power_txt1">–≠—Ç–æ –±–æ–ª—å—à–µ, —á–µ–º —É </span>
                  <span id="total_percentile" class="text-orange-primary">0</span><span data-i18n="rate.point_for_power_txt2"><span class="text-orange-primary">%</span> —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</span>
                </p>
              </div>
            </div>

            <div
              class="grid-item-c bg-green-secondary border-default flex flex-col items-center justify-center space-y-1 rounded-xl px-3 text-center"
            >
              <p id="olympiad_points" class="text-green-primary text-5xl font-bold"></p>
              <p class="text-center text-lg font-bold" data-i18n="rate.point_for_olymp">–ë–∞–ª–ª—ã –∑–∞ –æ–ª–∏–º–ø–∏–∞–¥—ã</p>
              <p class="text-sm">
                <span data-i18n="rate.point_for_olymp_txt1">–£ –≤–∞—Å –≤—ã—à–µ, —á–µ–º —É </span><span id="olympiad_percentile" class="text-green-primary">0</span><span class="text-green-primary">%</span>
              </p>
            </div>
          </div>

          <div class="border-default mb-6 rounded-xl p-6" style="border-width: 1px; border-color: #EFEFEF;">
            <p class="mb-2 text-lg font-bold" data-i18n="rate.recomend">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø–æ —Ä–æ—Å—Ç—É —Ä–µ–π—Ç–∏–Ω–≥–∞</p>

            <div class="space-y-2">
              <p class="text-sm">
                <span id="current_level" class="text-orange-primary text-2xl font-bold"></span>
                <span data-i18n="rate.level">–£—Ä–æ–≤–µ–Ω—å</span>
              </p>
              <div class="flex items-center gap-3">
                <div class="progress-container bg-gray-200 rounded-md w-full" style="height: 12px;">
                  <div id="progress-bar" class="bg-orange-500 h-full rounded-md transition-all" style="width: 0%;"></div>
                </div>
                <div style = "padding-bottom: 10px;">
              
                  <svg width="35" height="27" viewBox="0 0 35 27" fill="none" class="inline-block align-middle xmlns=" http:="" www.w3.org="" 2000="" svg"="">
                  <path d="M34.0081 13.5246L32.6656 16.4735L28.4555 25.7209L6.42753 25.6562L0.953125 13.4212L1.83946 12.9685C1.83946 12.9685 3.32537 17.3012 6.15381 17.4823C8.98225 17.6504 8.90405 13.1237 8.90405 13.1237L9.1517 13.0461L9.42542 12.9556C9.42542 12.9556 10.5855 15.8656 12.6058 15.3224C14.6261 14.7792 15.5906 11.5329 16.1641 7.85979C16.7377 4.19963 16.9201 1.94922 16.9201 1.94922H18.0672C18.0672 1.94922 18.2366 4.1867 18.784 7.85979C19.3315 11.52 20.283 14.7792 22.3033 15.3353C22.3163 15.3353 22.3163 15.3353 22.3294 15.3353C24.3367 15.8656 25.5097 12.9814 25.5097 12.9814L26.0311 13.1496C26.0311 13.1496 26.005 14.1972 26.2918 15.2577C26.5394 16.1889 27.0348 17.146 27.9863 17.4305C28.2078 17.4952 28.4685 17.534 28.7553 17.5211C31.5968 17.3659 33.1087 13.0461 33.1087 13.0461L34.0081 13.5246Z" fill="#FEC272"></path>
                  <path d="M13.3487 25.6818L6.42753 25.656L0.953125 13.4209L1.83946 12.9683C1.83946 12.9683 3.32537 17.301 6.15381 17.482C8.98225 17.6502 8.90405 13.1235 8.90405 13.1235L9.1517 13.0459L13.3487 25.6818Z" fill="#FFB96C"></path>
                  <path d="M26.3168 15.2964L18.6005 25.6949L14.625 25.682L22.3674 15.374C24.3747 15.9043 25.5477 13.0201 25.5477 13.0201L26.0691 13.1883C26.0561 13.1883 26.03 14.223 26.3168 15.2964Z" fill="#FFD39F"></path>
                  <path d="M34.008 13.5247L32.6655 16.4735L25.8094 25.7209L21.834 25.708L28.0122 17.4694C28.2338 17.5341 28.4945 17.5729 28.7813 17.5599C31.6227 17.4047 33.1347 13.085 33.1347 13.085L34.008 13.5247Z" fill="#FFD39F"></path>
                  <path d="M35.1144 12.826C35.1144 12.9941 35.0883 13.1493 35.0232 13.2916C34.8276 13.8219 34.3193 14.197 33.7197 14.197C32.9507 14.197 32.3251 13.5762 32.3381 12.8131C32.3381 12.6837 32.3642 12.5415 32.3902 12.4251C32.5597 11.856 33.0941 11.4421 33.7328 11.4421C34.4887 11.4551 35.1144 12.0759 35.1144 12.826Z" fill="#FFB96C"></path>
                  <path d="M35.1148 12.826C35.1148 12.9941 35.0887 13.1493 35.0236 13.2916C34.7498 13.6149 34.3327 13.8089 33.8765 13.8089C33.0814 13.8089 32.4297 13.1881 32.3906 12.4121C32.5601 11.8431 33.0945 11.4292 33.7332 11.4292C34.4891 11.4551 35.1148 12.0759 35.1148 12.826Z" fill="#FEC272"></path>
                  <path d="M34.5807 12.2442C34.5807 12.3218 34.5677 12.3865 34.5416 12.4511C34.4504 12.6969 34.2158 12.865 33.9421 12.865C33.5901 12.865 33.3164 12.5805 33.3164 12.2313C33.3164 12.1666 33.3294 12.1149 33.3425 12.0502C33.4207 11.7915 33.6683 11.5975 33.9551 11.5975C34.307 11.6234 34.5938 11.9079 34.5807 12.2442Z" fill="#FFD39F"></path>
                  <path d="M2.77651 12.7356C2.77651 12.9037 2.75044 13.0589 2.68527 13.2012C2.48975 13.7314 1.98141 14.1065 1.38184 14.1065C0.612813 14.1065 -0.0128343 13.4857 0.000200034 12.7226C0.000200034 12.5933 0.0262678 12.451 0.0523364 12.3346C0.221782 11.7656 0.756189 11.3517 1.39487 11.3517C2.16389 11.3517 2.77651 11.9725 2.77651 12.7356Z" fill="#FFB96C"></path>
                  <path d="M2.7769 12.7354C2.7769 12.9036 2.75084 13.0588 2.68566 13.201C2.41194 13.5244 1.99485 13.7184 1.53865 13.7184C0.743553 13.7184 0.0918373 13.0976 0.0527344 12.3216C0.22218 11.7525 0.756587 11.3386 1.39527 11.3386C2.16429 11.3516 2.7769 11.9724 2.7769 12.7354Z" fill="#FEC272"></path>
                  <path d="M2.25456 12.1534C2.25456 12.231 2.24153 12.2957 2.21546 12.3603C2.12422 12.6061 1.8896 12.7742 1.61588 12.7742C1.26395 12.7742 0.990234 12.4897 0.990234 12.1405C0.990234 12.0758 1.00327 12.0241 1.0163 11.9594C1.09451 11.7007 1.34216 11.5067 1.62891 11.5067C1.98084 11.5196 2.25456 11.8042 2.25456 12.1534Z" fill="#FFD39F"></path>
                  <path d="M27.1632 12.684C27.1632 12.8522 27.1372 13.0074 27.072 13.1496C26.8765 13.6799 26.3681 14.055 25.7686 14.055C24.9995 14.055 24.3739 13.4342 24.3869 12.6711C24.3869 12.5418 24.413 12.3995 24.4391 12.2831C24.6085 11.714 25.1429 11.3002 25.7816 11.3002C26.5506 11.3002 27.1632 11.921 27.1632 12.684Z" fill="#FFB96C"></path>
                  <path d="M27.1636 12.6839C27.1636 12.8521 27.1376 13.0073 27.0724 13.1495C26.7987 13.4729 26.3816 13.6669 25.9254 13.6669C25.1303 13.6669 24.4786 13.0461 24.4395 12.2701C24.6089 11.701 25.1433 11.2871 25.782 11.2871C26.551 11.3 27.1636 11.9208 27.1636 12.6839Z" fill="#FEC272"></path>
                  <path d="M26.6413 12.1021C26.6413 12.1797 26.6282 12.2444 26.6022 12.309C26.5109 12.5548 26.2763 12.7229 26.0026 12.7229C25.6507 12.7229 25.377 12.4384 25.377 12.0892C25.377 12.0245 25.39 11.9728 25.403 11.9081C25.4812 11.6494 25.7289 11.4554 26.0156 11.4554C26.3545 11.4684 26.6413 11.7529 26.6413 12.1021Z" fill="#FFD39F"></path>
                  <path d="M10.5851 12.632C10.5851 12.8002 10.559 12.9554 10.4939 13.0976C10.2983 13.6279 9.79001 14.003 9.19043 14.003C8.42141 14.003 7.79576 13.3822 7.80879 12.6191C7.80879 12.4898 7.83486 12.3475 7.86093 12.2311C8.03038 11.662 8.56478 11.2482 9.20347 11.2482C9.97249 11.2482 10.5981 11.869 10.5851 12.632Z" fill="#FFB96C"></path>
                  <path d="M10.5855 12.6322C10.5855 12.8003 10.5594 12.9555 10.4943 13.0978C10.2205 13.4211 9.80344 13.6151 9.34724 13.6151C8.55215 13.6151 7.90043 12.9943 7.86133 12.2183C8.03077 11.6492 8.56518 11.2354 9.20386 11.2354C9.97288 11.2483 10.5985 11.8691 10.5855 12.6322Z" fill="#FEC272"></path>
                  <path d="M10.0632 12.0501C10.0632 12.1277 10.0501 12.1924 10.0241 12.257C9.93281 12.5028 9.6982 12.6709 9.42447 12.6709C9.07255 12.6709 8.79883 12.3864 8.79883 12.0372C8.79883 11.9725 8.81186 11.9208 8.8249 11.8561C8.9031 11.5974 9.15075 11.4034 9.43751 11.4034C9.78943 11.4164 10.0632 11.7009 10.0632 12.0501Z" fill="#FFD39F"></path>
                  <path d="M18.9132 2.00058C18.9132 2.16871 18.8872 2.32391 18.822 2.46618C18.6265 2.99645 18.1181 3.37152 17.5186 3.37152C16.7495 3.37152 16.1239 2.75071 16.1369 1.98764C16.1369 1.85831 16.163 1.71604 16.1891 1.59964C16.3585 1.03057 16.8929 0.616699 17.5316 0.616699C18.2876 0.629633 18.9132 1.23751 18.9132 2.00058Z" fill="#FFB96C"></path>
                  <path d="M18.9136 2.00081C18.9136 2.16895 18.8876 2.32415 18.8224 2.46642C18.5487 2.78975 18.1316 2.98375 17.6754 2.98375C16.8803 2.98375 16.2286 2.36295 16.1895 1.58694C16.3589 1.01787 16.8933 0.604004 17.532 0.604004C18.288 0.629871 18.9136 1.23774 18.9136 2.00081Z" fill="#FEC272"></path>
                  <path d="M18.3913 1.41889C18.3913 1.49649 18.3782 1.56115 18.3522 1.62582C18.2609 1.87156 18.0263 2.03969 17.7526 2.03969C17.4007 2.03969 17.127 1.75516 17.127 1.40595C17.127 1.34129 17.14 1.28955 17.153 1.22489C17.2312 0.966218 17.4789 0.772217 17.7656 0.772217C18.1045 0.798084 18.3913 1.08262 18.3913 1.41889Z" fill="#FFD39F"></path>
                  <path d="M29.9919 25.4879C29.9919 25.7337 29.8876 25.9665 29.7312 26.1475C29.5748 26.3157 29.3532 26.4321 29.0925 26.4579C27.8934 26.5614 25.5602 26.7295 22.6796 26.8071C18.8736 26.9106 16.0321 26.8977 12.187 26.7813C9.30644 26.6907 6.98634 26.4967 5.77415 26.3933C5.5265 26.3674 5.30491 26.251 5.13547 26.0829C4.97906 25.9147 4.87478 25.6819 4.88782 25.4233C4.88782 24.9318 5.25278 24.5179 5.74808 24.4662C6.50407 24.3757 7.78143 24.2463 9.6714 24.1429C12.7736 23.9747 22.0931 24.0006 25.2083 24.1946C27.0983 24.311 28.3756 24.4403 29.1316 24.5438C29.6269 24.5826 29.9919 25.0094 29.9919 25.4879Z" fill="#FFB96C"></path>
                  <path d="M29.8622 25.2164C29.8622 25.3716 29.771 25.5268 29.6146 25.6303C29.4582 25.7337 29.2366 25.8113 28.9889 25.8243C27.8028 25.8889 25.4957 25.9924 22.6412 26.0441C18.8743 26.1088 16.0719 26.0959 12.2529 26.0183C9.39838 25.9536 7.10434 25.8372 5.91822 25.7596C5.67057 25.7467 5.44899 25.6691 5.29257 25.5656C5.13616 25.4492 5.04492 25.3069 5.04492 25.1517C5.04492 24.8413 5.40988 24.5827 5.89215 24.5439C6.63511 24.4921 7.91247 24.4145 9.77637 24.3499C12.8525 24.2464 22.0677 24.2723 25.1438 24.4016C27.0077 24.4792 28.272 24.5697 29.028 24.6215C29.4973 24.6344 29.8622 24.906 29.8622 25.2164Z" fill="#FEC272"></path>
                  <path d="M21.3906 16.9388L21.3776 21.4267L19.7613 23.0951L15.4339 23.0822L13.8438 21.4008L13.8568 16.9129L15.46 15.2574L19.7874 15.2704L21.3906 16.9388Z" fill="#FFB26C"></path>
                  <path d="M21.0396 16.7835L21.0266 20.8704L19.5668 22.3707H15.6434L14.1836 20.8446L14.1966 16.7576L15.6565 15.2573H19.5928L21.0396 16.7835Z" fill="#FF97C9"></path>
                  <path d="M15.6565 15.2573L15.6434 22.3707L14.1836 20.8446L14.1966 16.7576L15.6565 15.2573Z" fill="#EF50AB"></path>
                  <path d="M21.0393 16.7833L21.0262 20.8703L19.5664 22.3706L19.5925 15.2572L21.0393 16.7833Z" fill="#FFC0E1"></path>
                  <path d="M15.6556 15.2572L19.5659 22.3706H15.6426L15.6556 15.2572Z" fill="#F46CB4"></path>
                  <path d="M18.504 21.0019H17.652V18.0979L16.986 18.7759L16.5 18.2659L17.76 16.9999H18.504V21.0019Z" fill="white"></path>
                  <path d="M25.8745 22.4356C26.652 22.4356 27.2822 21.8102 27.2822 21.0388C27.2822 20.2673 26.652 19.642 25.8745 19.642C25.097 19.642 24.4668 20.2673 24.4668 21.0388C24.4668 21.8102 25.097 22.4356 25.8745 22.4356Z" fill="#FFB26C"></path>
                  <path d="M27.1256 20.8579C27.1256 21.0002 27.0995 21.1425 27.0473 21.2718C26.8779 21.7374 26.4347 22.0608 25.9134 22.0608C25.2486 22.0608 24.7012 21.5176 24.7012 20.8579C24.7012 20.7415 24.7142 20.6251 24.7533 20.5217C24.8967 20.0302 25.3659 19.6681 25.9134 19.6681C26.5911 19.6551 27.1256 20.1983 27.1256 20.8579Z" fill="#EF50AB"></path>
                  <path d="M27.1261 20.8577C27.1261 21 27.1001 21.1423 27.0479 21.2716C26.8133 21.5561 26.4484 21.7243 26.0573 21.7243C25.3665 21.7243 24.806 21.194 24.7539 20.5085C24.8973 20.017 25.3665 19.6549 25.914 19.6549C26.5917 19.6549 27.1261 20.1981 27.1261 20.8577Z" fill="#F46CB4"></path>
                  <path d="M26.6685 20.3535C26.6685 20.4182 26.6554 20.4828 26.6294 20.5346C26.5512 20.7415 26.3556 20.8967 26.108 20.8967C25.8082 20.8967 25.5605 20.651 25.5605 20.3535C25.5605 20.3018 25.5736 20.25 25.5866 20.1983C25.6518 19.9784 25.8603 19.8103 26.121 19.8103C26.4208 19.8103 26.6685 20.056 26.6685 20.3535Z" fill="#FF97C9"></path>
                  <path d="M9.04637 22.3837C9.82383 22.3837 10.4541 21.7583 10.4541 20.9869C10.4541 20.2155 9.82383 19.5901 9.04637 19.5901C8.26892 19.5901 7.63867 20.2155 7.63867 20.9869C7.63867 21.7583 8.26892 22.3837 9.04637 22.3837Z" fill="#FFB26C"></path>
                  <path d="M10.2584 20.8058C10.2584 20.9481 10.2323 21.0904 10.1802 21.2197C10.0107 21.6853 9.56754 22.0086 9.04617 22.0086C8.38142 22.0086 7.83398 21.4654 7.83398 20.8058C7.83398 20.6894 7.84702 20.573 7.88612 20.4696C8.0295 19.9781 8.49873 19.6159 9.04617 19.6159C9.71092 19.603 10.2584 20.1462 10.2584 20.8058Z" fill="#EF50AB"></path>
                  <path d="M10.259 20.8061C10.259 20.9483 10.2329 21.0906 10.1808 21.2199C9.94614 21.5045 9.58118 21.6726 9.19015 21.6726C8.49933 21.6726 7.93886 21.1423 7.88672 20.4569C8.0301 19.9654 8.49933 19.6033 9.04677 19.6033C9.71152 19.6033 10.259 20.1465 10.259 20.8061Z" fill="#F46CB4"></path>
                  <path d="M9.80127 20.3014C9.80127 20.3661 9.78824 20.4307 9.76217 20.4825C9.68397 20.6894 9.48845 20.8446 9.2408 20.8446C8.94101 20.8446 8.69336 20.5989 8.69336 20.3014C8.69336 20.2497 8.70639 20.1979 8.71943 20.1462C8.7846 19.9263 8.99315 19.7582 9.25383 19.7582C9.55362 19.7582 9.80127 20.0039 9.80127 20.3014Z" fill="#FF97C9"></path>
                  </svg>
              
                </div>
              </div>

              <!-- –¢–µ–∫—Å—Ç —Å XP -->
              <p class="text-sm">
                <span data-i18n="rate.recommend_lvl_txt1">–û—Å—Ç–∞–ª–æ—Å—å </span><span id="xp_to_next" class="font-bold">0</span>
                <span data-i18n="rate.recommend_lvl_txt2">XP –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ
                  —É—Ä–æ–≤–Ω—è</span>
              </p>
            </div>
          </div>

          <div class="table-group">
            <p class="mb-4 text-xl font-bold" data-i18n="rate.obwii_rate">–û–±—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥</p>

            <!-- Tabs -->
            <div class="tabs w-fit">
              <a href="/participant/rate-overall.html" class="tabs-link active"
              data-i18n="rate.obwii_rate"
                >–û–±—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥</a
              >
              <a href="/participant/rate-olympiad.html" class="tabs-link"
              data-i18n="rate.rate_olympiad"
                >–†–µ–π—Ç–∏–Ω–≥ –ø–æ –æ–ª–∏–º–ø–∏–∞–¥–µ</a
              >
            </div>

            <!-- Control Panel -->
            <div class="my-6 rounded-lg bg-white">
              <div class="flex flex-wrap gap-4">
                <!-- Search -->
                <div class="relative w-full max-w-[350px]">
                  <input id="filter-search"
                    type="text"
                    placeholder="–ò—Å–∫–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞"
                    data-i18n="rate.search_name"
                    data-i18n-attr="placeholder"           
                    class="focus:ring-orange-primary w-full rounded-lg border border-gray-200 py-2 pr-4 pl-10 focus:border-transparent focus:ring-2 focus:outline-none"
                  />
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="absolute top-1/2 left-3 h-5 w-5 -translate-y-1/2 text-gray-400"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                    />
                  </svg>
                </div>

                <!-- Filters -->

                <select id="filter-country"
                  class="cursor-pointer rounded-lg border border-gray-200 bg-white px-4 py-2"
                >
                  <option value="" data-i18n="rate.all_country">–í—Å–µ —Å—Ç—Ä–∞–Ω—ã</option>
                </select>

                <select id="filter-grade"
                  class="cursor-pointer rounded-lg border border-gray-200 bg-white px-4 py-2"
                >
                <option value="" data-i18n="rate.all_grades">–í—Å–µ –∫–ª–∞—Å—Å—ã</option>
                <option value="first">1 </option>
                <option value="second">2 </option>
                <option value="third">3 </option>
                <option value="fourth">4 </option>
                <option value="fifth">5 </option>
                <option value="sixth">6 </option>
                <option value="seventh">7 </option>
                <option value="eights">8 </option>
                <option value="ninth">9 </option>
                <option value="tenth">10 </option>
                <option value="eleventh">11 </option>
                </select>
              </div>
            </div>

            <div class="border-default mb-6 overflow-x-auto rounded-2xl border">
              <table class="table-olympiads w-full rounded-2xl pb-6">
                <thead>
                  <tr class="border-b border-gray-200">
                    <th class="p-table">
                      <div id="sort-rank-header" class="flex items-center gap-1 cursor-pointer">
                        <span data-i18n="rate_overall.table_rank">–†–∞–Ω–∫</span>
                        <span>
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 16 16"
                            fill="currentColor"
                            class="size-4"
                          >
                            <path
                              fill-rule="evenodd"
                              d="M5.22 10.22a.75.75 0 0 1 1.06 0L8 11.94l1.72-1.72a.75.75 0 1 1 1.06 1.06l-2.25 2.25a.75.75 0 0 1-1.06 0l-2.25-2.25a.75.75 0 0 1 0-1.06ZM10.78 5.78a.75.75 0 0 1-1.06 0L8 4.06 6.28 5.78a.75.75 0 0 1-1.06-1.06l2.25-2.25a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1 0 1.06Z"
                              clip-rule="evenodd"
                            />
                          </svg>
                        </span>
                      </div>
                    </th>
                    <th class="p-table" data-i18n="rate_overall.table_part_name">–ò–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞</th>
                    <th class="p-table" data-i18n="rate_overall.table_grade">–ö–ª–∞—Å—Å</th>
                    <th class="p-table" data-i18n="rate_overall.table_country">–°—Ç—Ä–∞–Ω–∞</th>
                    <th class="p-table">
                      <div class="flex items-center gap-1">
                        <span data-i18n="rate_overall.total_points">–û–±—â–µ–µ –ë–∞–ª–ª—ã</span>
                        <span>
                          <img
                            src="/src/assets/images/coin.png"
                            alt="coin"
                            class="h-5 w-5"
                          />
                        </span>
                      </div>
                    </th>
                    <th class="p-table" data-i18n="rate_overall.points_for_olymp">–ë–∞–ª–ª—ã –∑–∞ –æ–ª–∏–º–ø–∏–∞–¥—ã</th>
                    <th class="p-table" data-i18n="rate_overall.points_for_tasks">–ë–∞–ª–ª—ã –∑–∞ –∑–∞–¥–∞—á–∏</th>
                  </tr>
                </thead>
                <tbody id="rateoverall-tbody" class="tbody-rate divide-y divide-gray-200">
                </tbody>
              </table>
            </div>

            <!-- Pagination -->
            <div class="mt-6 flex items-center justify-between" style="margin-bottom: 32px;">
              <div class="text-gray-primary text-sm"><span data-i18n="rate_overall.count">–í—Å–µ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤: </span><span id="total-rateoverall-count">0</span></div>
              <div class="pagination flex items-center justify-end"></div>
            </div>

            <div class="banner bg-blue-secondary mb-6 flex justify-between rounded-2xl">
              <div class="space-y-2 px-6 py-5 sm:w-3/5">
                <p class="title mb-2 text-lg font-bold" data-i18n="result.points_info">
                  –ö–∞–∫ –º–æ–∂–Ω–æ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –µ—â—ë –±–∞–ª–ª—ã?
                </p>
                <p>
                  <span class="text-blue-primary font-bold" data-i18n="result.points_info2">–ë–∞–ª–ª—ã –∑–∞ –æ–ª–∏–º–ø–∏–∞–¥—ã ‚Äî</span>
                  <span data-i18n="result.points_info3">–ø–æ–ª—É—á–∞–µ—à—å XP –∑–∞ —É—á–∞—Å—Ç–∏–µ –≤ —Ç—É—Ä–∞—Ö. –ß–µ–º –≤—ã—à–µ –º–µ—Å—Ç–æ ‚Äî —Ç–µ–º –±–æ–ª—å—à–µ
                  –±–∞–ª–ª–æ–≤.</span>
                </p>
  
                <ul class="list-inside list-disc ps-4 marker:ms-1">
                  <li>ü•á <span data-i18n="result.place1">1 –º–µ—Å—Ç–æ</span> ‚Äî +100 XP</li>
                  <li>ü•à <span data-i18n="result.place2">2 –º–µ—Å—Ç–æ</span> ‚Äî +70 XP</li>
                  <li>ü•â <span data-i18n="result.place3">3 –º–µ—Å—Ç–æ</span> ‚Äî +50 XP</li>
                  <li>‚úÖ <span data-i18n="result.place4">–£—á–∞—Å—Ç–∏–µ</span> ‚Äî +10 XP</li>
                </ul>
  
                <p>
                  <span class="text-blue-primary font-bold" data-i18n="result.points_info5">–ë–∞–ª–ª—ã –∑–∞ —Ä–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ ‚Äî</span>
                  <span data-i18n="result.points_info6">–≤—ã–ø–æ–ª–Ω—è–π –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ –ª–∏ —Ä–µ—à–∏—à—å –≤—Å–µ –∑–∞–¥–∞—á–∏ –¥–æ
                  –¥–µ–¥–ª–∞–π–Ω–∞, –ø–æ–ª—É—á–∏—à—å +15 XP –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ</span>
                </p>
  
                <p>
                  <span class="text-blue-primary font-bold" data-i18n="result.points_info7">–ù–∞–≥—Ä–∞–¥—ã ‚Äî</span>
                  <span data-i18n="result.points_info8">–ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—é—Ç—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞</span>
                </p>
              </div>
              <div
                class="hidden w-2/5 bg-[url('/src/assets/images/man.png')] bg-contain bg-bottom-right bg-no-repeat sm:block">
              </div>
          </div>
          </div>
        </main>
      </div>

      <div
        id="overlayModal"
        class="overlay fixed inset-0 z-20 hidden bg-black/50 transition"
      ></div>

      <div
      id="modalNotification"
      class="modal fixed top-18 z-30 hidden max-w-lg max-sm:inset-x-4 sm:right-10 sm:w-full"
    >
      <div class="relative">
        <div
          class="flex flex-col space-y-4 rounded-3xl bg-white p-4 pt-6 text-base"
        >
          <p class="text-xl font-bold" data-i18n="notification.nots-popup">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</p>

          <div class="tabs !mb-4 justify-between overflow-x-auto">
            <div
              class="tabs-link active flex cursor-pointer items-center gap-1"
              data-tab="all"
            >
              <span>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="size-5"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"
                  />
                </svg>
              </span>
              <span data-i18n="notification.all">–í—Å–µ</span>
              <span class="count-msg">4</span>
            </div>
            <div
              class="tabs-link flex cursor-pointer items-center gap-1"
              data-tab="olympiads"
            >
              <span>
              <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M6.66602 2.16675V4.66675" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M13.334 2.16675V4.66675" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M2.91602 8.07495H17.0827" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M17.5 7.58341V14.6667C17.5 17.1667 16.25 18.8334 13.3333 18.8334H6.66667C3.75 18.8334 2.5 17.1667 2.5 14.6667V7.58341C2.5 5.08341 3.75 3.41675 6.66667 3.41675H13.3333C16.25 3.41675 17.5 5.08341 17.5 7.58341Z" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M13.0781 11.9167H13.0856" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M13.0781 14.4167H13.0856" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9.99607 11.9167H10.0036" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9.99607 14.4167H10.0036" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M6.91209 11.9167H6.91957" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M6.91209 14.4167H6.91957" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>

              </span>
              <span data-i18n="notification.olympiads">–û–ª–∏–º–ø–∏–∞–¥—ã</span>
              <span class="count-msg">0</span>
            </div>
            <div
              class="tabs-link flex cursor-pointer items-center gap-1"
              data-tab="tasks"
            >
              <span>
              <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M10.3086 7.8999H14.6836" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M5.31641 7.8999L5.94141 8.5249L7.81641 6.6499" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M10.3086 13.7334H14.6836" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M5.31641 13.7334L5.94141 14.3584L7.81641 12.4834" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M7.49935 18.8334H12.4993C16.666 18.8334 18.3327 17.1667 18.3327 13.0001V8.00008C18.3327 3.83341 16.666 2.16675 12.4993 2.16675H7.49935C3.33268 2.16675 1.66602 3.83341 1.66602 8.00008V13.0001C1.66602 17.1667 3.33268 18.8334 7.49935 18.8334Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>

              </span>
              <span data-i18n="notification.tasks">–ó–∞–¥–∞—á–∏</span>
              <span class="count-msg">1</span>
            </div>
            <div
              class="tabs-link flex cursor-pointer items-center gap-1"
              data-tab="profile"
            >
              <span>
              <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M10.1341 9.55841C10.0508 9.55008 9.95078 9.55008 9.85911 9.55841C7.87578 9.49175 6.30078 7.86675 6.30078 5.86675C6.30078 3.82508 7.95078 2.16675 10.0008 2.16675C12.0424 2.16675 13.7008 3.82508 13.7008 5.86675C13.6924 7.86675 12.1174 9.49175 10.1341 9.55841Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M5.96758 12.6333C3.95091 13.9833 3.95091 16.1833 5.96758 17.5249C8.25924 19.0583 12.0176 19.0583 14.3092 17.5249C16.3259 16.1749 16.3259 13.9749 14.3092 12.6333C12.0259 11.1083 8.26758 11.1083 5.96758 12.6333Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>


              </span>
              <span data-i18n="notification.profile">–ü—Ä–æ—Ñ–∏–ª—å</span>
              <span class="count-msg">2</span>
            </div>
          </div>

          <div
            class="tabs-content scrollbar max-h-[70vh] overflow-y-scroll pe-2"
          >

          </div>
        </div>

        <button
          class="absolute top-6 right-5 cursor-pointer"
          onclick="toggleModal('modalNotification')"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
            class="size-5"
          >
            <path
              fill-rule="evenodd"
              d="M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z"
              clip-rule="evenodd"
            />
          </svg>
        </button>
      </div>
    </div>
    </div>

    <script>
      lucide.createIcons()

      function toggleSidebar() {
        const sidebar = document.getElementById('sidebar')
        const overlay = document.getElementById('overlay')
        sidebar.classList.toggle('active')
        overlay.classList.toggle('hidden')
      }

      function toggleModal(modalId, show = null) {
        const modal = document.getElementById(modalId)
        const overlay = document.getElementById('overlayModal')

        // Determine visibility
        const shouldShow =
          show !== null ? show : modal.classList.contains('hidden')

        // Manage overlay
        overlay.classList.toggle('hidden', !shouldShow)

        // Toggle modal
        modal.classList.toggle('hidden', !shouldShow)

        // Close other modals
        document.querySelectorAll('.modal').forEach((m) => {
          if (m.id !== modalId) m.classList.add('hidden')
        })

        // Body scroll control
        document.body.style.overflow = shouldShow ? 'hidden' : 'auto'
      }


      // Tabs functionality
      document.addEventListener('DOMContentLoaded', function () {
        const tabs = document.querySelectorAll('.tabs-link')
        const notifications = document.querySelectorAll('.tabs-notification')

        // Add click event listeners to tabs
        tabs.forEach((tab) => {
          tab.addEventListener('click', function () {
            const tabType = this.dataset.tab

            // Remove active class from all tabs
            tabs.forEach((t) => t.classList.remove('active'))

            // Add active class to clicked tab
            this.classList.add('active')

            // Filter notifications
            notifications.forEach((notification) => {
              if (tabType === 'all' || notification.dataset.tab === tabType) {
                notification.style.display = 'flex'
              } else {
                notification.style.display = 'none'
              }
            })
          })
        })
      })
    </script>
    <script src="/src/scripts/i18n.js"></script>
    <script src="/src/scripts/langInit.js"></script>
    <script src="/auth.js" defer></script>
    <script src="/src/participant/rate-overall.js" defer></script>
    <script src="/src/participant/notifications.js" defer></script>
    <script src="/src/participant/settings.js" defer></script>
    <script>
      async function loadBalance() {
  const token = localStorage.getItem('access_token')
  if (!token) {
    alert('–¢–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ.')
    return
  }

  try {
    const response = await authorizedFetch('https://portal.femo.kz/api/payments/participant/dashboard/balance/', {
      headers: {
        Authorization: `Bearer ${token}`
      }
    })

    if (!response.ok) {
      throw new Error(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±–∞–ª–∞–Ω—Å–∞: ${response.status}`)
    }

    const data = await response.json()
    const balanceEl = document.querySelector('.balance')
    if (balanceEl) {
      balanceEl.textContent = `${data.balance.toLocaleString('ru-RU')} ‚Ç∏`
    }
  } catch (err) {
    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –±–∞–ª–∞–Ω—Å–∞:', err)
  }
}
      document.addEventListener("DOMContentLoaded", () => {
        const dropdownBtn = document.getElementById("lang-dropdown-btn");
        const menu = document.getElementById("lang-menu");

        const flagEl = document.getElementById("lang-flag");
        const textEl = document.getElementById("lang-text");

        const langMap = {
          ru: { flag: "https://flagcdn.com/w40/ru.png", label: "RU" },
          kz: { flag: "https://flagcdn.com/w40/kz.png", label: "KZ" },
          en: { flag: "https://flagcdn.com/w40/gb.png", label: "EN" }
        };

        // –æ—Ç–∫—Ä—ã—Ç—å / –∑–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é
        dropdownBtn.addEventListener("click", () => {
          menu.classList.toggle("hidden");
        });

        // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞
        function highlightSelected(lang) {
          document.querySelectorAll(".lang-option").forEach(opt => {
            opt.classList.toggle("active", opt.dataset.lang === lang);
          });
        }

        // —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —è–∑—ã–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        const current = localStorage.getItem("lang") || "ru";
        flagEl.src = langMap[current].flag;
        textEl.textContent = langMap[current].label;
        highlightSelected(current);

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞
        document.querySelectorAll("#lang-menu .lang-option").forEach(opt => {
          opt.addEventListener("click", async () => {
            const lang = opt.dataset.lang;

            // –æ–±–Ω–æ–≤–ª—è–µ–º UI
            flagEl.src = langMap[lang].flag;
            textEl.textContent = langMap[lang].label;
            highlightSelected(lang);
            menu.classList.add("hidden");

            // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ
            localStorage.setItem("lang", lang);

            // --- –≤–æ—Ç –≤–∞–∂–Ω–æ–µ –º–µ—Å—Ç–æ ---
            if (typeof updateUserSettings === "function") {
              try {
                // –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º PATCH –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –∫–∞–∫ –≤ —Ç–≤–æ–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ input[name="lang"]
                await updateUserSettings({ language: lang });

                // –¢—Ä–∏–≥–≥–µ—Ä–∏–º —Å–æ–±—ã—Ç–∏–µ –¥–ª—è i18n (—á—Ç–æ–±—ã —Ñ—Ä–æ–Ω—Ç –æ–±–Ω–æ–≤–∏–ª —Ç–µ–∫—Å—Ç—ã –∏ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
                window.dispatchEvent(new Event("i18n:languageChanged"));
              } catch (err) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞ —á–µ—Ä–µ–∑ API:", err);
                alert("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–º–µ–Ω–∏—Ç—å —è–∑—ã–∫. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.");
              }
            } else {
              console.warn("updateUserSettings –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –Ø–∑—ã–∫ –æ–±–Ω–æ–≤–ª—ë–Ω —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ");
              location.reload();
            }
          });
        });

        // –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ dropdown
        document.addEventListener("click", (e) => {
          if (!document.getElementById("lang-dropdown").contains(e.target)) {
            menu.classList.add("hidden");
          }
        });
      });

      document.addEventListener("DOMContentLoaded", async () => {
  // ... –≤–µ—Å—å —Ç–≤–æ–π –∫–æ–¥ dropdown

  // –ó–∞–≥—Ä—É–∑–∫–∞ –±–∞–ª–∞–Ω—Å–∞
  await loadBalance();
});

    </script>
    <style>
          .lang-option.active {
      color: var(--color-orange-primary);
      font-weight: 600;
    }
    
    #lang-menu {
      transition: opacity 0.15s ease, transform 0.15s ease;
    }
    
    #lang-menu.hidden {
      opacity: 0;
      transform: translateY(-5px);
      pointer-events: none;
    }
    
    .balance-card {
      width: 128px;
      height: 40px;
      background-color: #FEF6ED;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 10px;
      border-radius: 6px;
      font-family: 'Proxima Nova', sans-serif;
      font-weight: 700;
      font-style: bold;
      font-size: 14px;
      line-height: 100%;
      color: #F4891E;
    }
    
    .balance-label {
      margin-right: 5px;
    }
    
    .balance {
      /* –î–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è –ø–æ –ø—Ä–∞–≤–æ–º—É –∫—Ä–∞—é */
      white-space: nowrap;
    }
    
    
    </style>
  </body>
</html>
